<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBS Log Display</title>
    <style>
        body {
            background-color: transparent;
            margin: 100;
            padding: 20px;
            overflow: hidden;
        }
        #log-content {
            white-space: pre;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 16px;
            color: #00ff6a;
            line-height: 1.3;
            font-weight: bold;
        }
        .red {
            color: red;
        }
    </style>
</head>
<body>
    <div id="log-content"></div>

    <script>
        const logContent = document.getElementById('log-content');
        const speedThreshold = 10; // m/s
        const spinThreshold = 50; // rev/s

        function fetchLogContent() {
            fetch('obs.log')
                .then(response => response.text())
                .then(data => {
                    const lines = data.trim().split('\n').slice(-20);
                    const formattedLines = lines.map(line => {
                        if (line.startsWith('Ball Hit,')) {
                            const match = line.match(/"([\d.]+) m\/s, ([\d.]+) rev\/s/);
                            if (match) {
                                const speed = parseFloat(match[1]);
                                const spin = parseFloat(match[2]);
                                let formattedLine = line;

                                if (speed > speedThreshold) {
                                    formattedLine = formattedLine.replace(
                                        `"${speed} m/s`,
                                        `"<span class="red">${speed} m/s</span>`
                                    );
                                }
                                if (spin > spinThreshold) {
                                    formattedLine = formattedLine.replace(
                                        `${spin} rev/s`,
                                        `<span class="red">${spin} rev/s</span>`
                                    );
                                }
                                return formattedLine;
                            }
                        }
                        return line;
                    });
                    logContent.innerHTML = formattedLines.join('\n');
                })
                .catch(error => console.error('Error fetching log file:', error));
        }

        fetchLogContent();
        setInterval(fetchLogContent, 1000);
    </script>
</body>
</html>